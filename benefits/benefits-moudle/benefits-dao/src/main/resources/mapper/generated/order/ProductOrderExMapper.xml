<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lx.benefits.mapper.order.ProductOrderExMapper">

	<resultMap id="BaseResultMap" type="com.lx.benefits.bean.entity.order.ProductOrderEx">
		<id property="id" column="ID" /><!--主键ID-->
		<result property="orderNumber" column="ORDER_NUMBER" /><!--订单编号,商品级订单编号-->
		<result property="skuId" column="SKU_ID" /><!--sku id-->
		<result property="buyerUserId" column="BUYER_USER_ID" /><!--买家用户ID-->
		<result property="titleEn" column="TITLE_EN" /><!--商品标题（英文）-->
		<result property="title" column="TITLE" /><!--商品标题-->
		<result property="image" column="IMAGE" /><!--商品主图-->
		<result property="price" column="PRICE" /><!--商品原价(市场价)，单位分-->
		<result property="nowPrice" column="NOW_PRICE" /><!--商品现价(购买价)，单位分-->
		<result property="costPrice" column="COST_PRICE" /><!--商品成本价-->
		<result property="spec" column="SPEC" /><!--规格-->
		<result property="deliverAreaId" column="DELIVER_AREA_ID" /><!--发货地址ID-->
		<result property="deliverCode" column="DELIVER_CODE" /><!--发货编码-->
		<result property="createTime" column="CREATE_TIME" /><!--创建时间-->
		<result property="updateTime" column="UPDATE_TIME" /><!--修改时间-->
	</resultMap>

	<sql id="Base_Column_List">
            `ID` ,
            `ORDER_NUMBER` ,
            `SKU_ID` ,
            `BUYER_USER_ID` ,
            `TITLE_EN` ,
            `TITLE` ,
            `IMAGE` ,
            `PRICE` ,
            `NOW_PRICE` ,
            `COST_PRICE` ,
            `SPEC` ,
            `DELIVER_AREA_ID` ,
            `DELIVER_CODE` ,
            `CREATE_TIME` ,
            `UPDATE_TIME` 
	</sql>
	
    <sql id="idCnd">
        <where>
            <if test="id!=null" >ID=#{id,jdbcType=BIGINT}</if>
            <if test="id==null">1=0</if>
        </where>
    </sql>
    
	<insert id="insert" parameterType="com.lx.benefits.bean.entity.order.ProductOrderEx" keyProperty="id" useGeneratedKeys="true">
		INSERT INTO 
		product_order_ex
		(
		`ID`,
		`ORDER_NUMBER`,
		`SKU_ID`,
		`BUYER_USER_ID`,
		`TITLE_EN`,
		`TITLE`,
		`IMAGE`,
		`PRICE`,
		`NOW_PRICE`,
		`COST_PRICE`,
		`SPEC`,
		`DELIVER_AREA_ID`,
		`DELIVER_CODE`,
		`CREATE_TIME`,
		`UPDATE_TIME`
		) VALUES 
		(
		#{id,jdbcType=BIGINT},
		#{orderNumber,jdbcType=BIGINT},
		#{skuId,jdbcType=BIGINT},
		#{buyerUserId,jdbcType=BIGINT},
		#{titleEn,jdbcType=VARCHAR},
		#{title,jdbcType=VARCHAR},
		#{image,jdbcType=VARCHAR},
		#{price,jdbcType=BIGINT},
		#{nowPrice,jdbcType=BIGINT},
		#{costPrice,jdbcType=BIGINT},
		#{spec,jdbcType=VARCHAR},
		#{deliverAreaId,jdbcType=BIGINT},
		#{deliverCode,jdbcType=VARCHAR},
		#{createTime,jdbcType=TIMESTAMP},
		#{updateTime,jdbcType=TIMESTAMP}
		)
	</insert>
	
	<insert id="insertSelective" parameterType="com.lx.benefits.bean.entity.order.ProductOrderEx" keyProperty="id" useGeneratedKeys="true">
		INSERT INTO 
		product_order_ex
		<trim prefix="(" suffix=")" suffixOverrides=",">
		<if test="id!=null" >`ID`,</if>
		<if test="orderNumber!=null" >`ORDER_NUMBER`,</if>
		<if test="skuId!=null" >`SKU_ID`,</if>
		<if test="buyerUserId!=null" >`BUYER_USER_ID`,</if>
		<if test="titleEn!=null" >`TITLE_EN`,</if>
		<if test="title!=null" >`TITLE`,</if>
		<if test="image!=null" >`IMAGE`,</if>
		<if test="price!=null" >`PRICE`,</if>
		<if test="nowPrice!=null" >`NOW_PRICE`,</if>
		<if test="costPrice!=null" >`COST_PRICE`,</if>
		<if test="spec!=null" >`SPEC`,</if>
		<if test="deliverAreaId!=null" >`DELIVER_AREA_ID`,</if>
		<if test="deliverCode!=null" >`DELIVER_CODE`,</if>
		<if test="createTime!=null" >`CREATE_TIME`,</if>
		<if test="updateTime!=null" >`UPDATE_TIME`</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
		<if test="id!=null" >#{id,jdbcType=BIGINT},</if>
		<if test="orderNumber!=null" >#{orderNumber,jdbcType=BIGINT},</if>
		<if test="skuId!=null" >#{skuId,jdbcType=BIGINT},</if>
		<if test="buyerUserId!=null" >#{buyerUserId,jdbcType=BIGINT},</if>
		<if test="titleEn!=null" >#{titleEn,jdbcType=VARCHAR},</if>
		<if test="title!=null" >#{title,jdbcType=VARCHAR},</if>
		<if test="image!=null" >#{image,jdbcType=VARCHAR},</if>
		<if test="price!=null" >#{price,jdbcType=BIGINT},</if>
		<if test="nowPrice!=null" >#{nowPrice,jdbcType=BIGINT},</if>
		<if test="costPrice!=null" >#{costPrice,jdbcType=BIGINT},</if>
		<if test="spec!=null" >#{spec,jdbcType=VARCHAR},</if>
		<if test="deliverAreaId!=null" >#{deliverAreaId,jdbcType=BIGINT},</if>
		<if test="deliverCode!=null" >#{deliverCode,jdbcType=VARCHAR},</if>
		<if test="createTime!=null" >#{createTime,jdbcType=TIMESTAMP},</if>
		<if test="updateTime!=null" >#{updateTime,jdbcType=TIMESTAMP}</if>
		</trim>
	</insert>
	<delete id="deleteByPrimaryKey">
		DELETE FROM product_order_ex
		<include refid="idCnd" />
	</delete>
	
	<update id="updateByPrimaryKeySelective">
		UPDATE product_order_ex
		<set>
		<if test="id!=null" >`ID`=#{id,jdbcType=BIGINT},</if>
		<if test="orderNumber!=null" >`ORDER_NUMBER`=#{orderNumber,jdbcType=BIGINT},</if>
		<if test="skuId!=null" >`SKU_ID`=#{skuId,jdbcType=BIGINT},</if>
		<if test="buyerUserId!=null" >`BUYER_USER_ID`=#{buyerUserId,jdbcType=BIGINT},</if>
		<if test="titleEn!=null" >`TITLE_EN`=#{titleEn,jdbcType=VARCHAR},</if>
		<if test="title!=null" >`TITLE`=#{title,jdbcType=VARCHAR},</if>
		<if test="image!=null" >`IMAGE`=#{image,jdbcType=VARCHAR},</if>
		<if test="price!=null" >`PRICE`=#{price,jdbcType=BIGINT},</if>
		<if test="nowPrice!=null" >`NOW_PRICE`=#{nowPrice,jdbcType=BIGINT},</if>
		<if test="costPrice!=null" >`COST_PRICE`=#{costPrice,jdbcType=BIGINT},</if>
		<if test="spec!=null" >`SPEC`=#{spec,jdbcType=VARCHAR},</if>
		<if test="deliverAreaId!=null" >`DELIVER_AREA_ID`=#{deliverAreaId,jdbcType=BIGINT},</if>
		<if test="deliverCode!=null" >`DELIVER_CODE`=#{deliverCode,jdbcType=VARCHAR},</if>
		<if test="createTime!=null" >`CREATE_TIME`=#{createTime,jdbcType=TIMESTAMP},</if>
		<if test="updateTime!=null" >`UPDATE_TIME`=#{updateTime,jdbcType=TIMESTAMP}</if>
		</set>
		<include refid="idCnd" />
	</update>
	
	<select id="selectByOrderNumber" resultMap="BaseResultMap">
		SELECT
			<include refid="Base_Column_List" />
		FROM 
			product_order_ex
		WHERE `ORDER_NUMBER` =#{orderNumber}
		limit 0,1
	</select>
	
	<select id="selectByPrimaryKey" resultMap="BaseResultMap">
		SELECT
			<include refid="Base_Column_List" />
		FROM 
			product_order_ex
		<include refid="idCnd" />
	</select>
	
	<sql id="where_clause">
    	<where>
			<if test="id!=null" >`ID`=#{id,jdbcType=BIGINT}   </if>
	        <if test="orderNumber!=null" > AND `ORDER_NUMBER`=#{orderNumber,jdbcType=BIGINT}</if>
	        <if test="skuId!=null" > AND `SKU_ID`=#{skuId,jdbcType=BIGINT}</if>
	        <if test="buyerUserId!=null" > AND `BUYER_USER_ID`=#{buyerUserId,jdbcType=BIGINT}</if>
	        <if test="titleEn!=null" > AND `TITLE_EN`=#{titleEn,jdbcType=VARCHAR}</if>
	        <if test="title!=null" > AND `TITLE`=#{title,jdbcType=VARCHAR}</if>
	        <if test="image!=null" > AND `IMAGE`=#{image,jdbcType=VARCHAR}</if>
	        <if test="price!=null" > AND `PRICE`=#{price,jdbcType=BIGINT}</if>
	        <if test="nowPrice!=null" > AND `NOW_PRICE`=#{nowPrice,jdbcType=BIGINT}</if>
	        <if test="costPrice!=null" > AND `COST_PRICE`=#{costPrice,jdbcType=BIGINT}</if>
	        <if test="spec!=null" > AND `SPEC`=#{spec,jdbcType=VARCHAR}</if>
	        <if test="deliverAreaId!=null" > AND `DELIVER_AREA_ID`=#{deliverAreaId,jdbcType=BIGINT}</if>
	        <if test="deliverCode!=null" > AND `DELIVER_CODE`=#{deliverCode,jdbcType=VARCHAR}</if>
	        <if test="createTime!=null" > AND `CREATE_TIME`=#{createTime,jdbcType=TIMESTAMP}</if>
	        <if test="updateTime!=null" > AND `UPDATE_TIME`=#{updateTime,jdbcType=TIMESTAMP}</if>
    	</where>
    </sql>
    
	
</mapper>

